<div class="bb-menu-container">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Frontend Pages</h3>
                    </div>
                    <div class="panel-body">

                        <ol class="bb-sortable-static">
                            <li data-id="1">
                                <div class="bb-menu-item">
                                    <div class="bb-menu-item-title">
                                        <i></i>
                                        <span>Home</span>

                                        <div class="bb-menu-actions pull-right">
                                            <a href="javascript:" class="bb-menu-delete"><i class="fa fa-close"></i></a>
                                            <a href="javascript:" class="bb-menu-collapse"><i
                                                    class="fa fa-caret-down"></i></a>
                                        </div>
                                    </div>
                                    <div class="bb-menu-item-body">
                                        <div class="bb-menu-form">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Icon</label>
                                                        <input type="text" data-placement="right"
                                                               class="form-control input-sm icp-auto">
                                                    </div>
                                                </div>
                                                <div class="col-md-8">
                                                    <div class="form-group">
                                                        <label>Item Title</label>
                                                        <input type="text"
                                                               class="form-control input-sm menu-item-title">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label>Item URL</label>
                                                <input type="text" class="form-control input-sm">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li data-id="2">
                                <div class="bb-menu-item">
                                    <div class="bb-menu-item-title">
                                        <i></i>
                                        <span>About</span>

                                        <div class="bb-menu-actions pull-right">
                                            <a href="javascript:" class="bb-menu-delete"><i class="fa fa-close"></i></a>
                                            <a href="javascript:" class="bb-menu-collapse"><i
                                                    class="fa fa-caret-down"></i></a>
                                        </div>
                                    </div>
                                    <div class="bb-menu-item-body">
                                        <div class="bb-menu-form">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Icon</label>
                                                        <input type="text" data-placement="right"
                                                               class="form-control input-sm icp-auto">
                                                    </div>
                                                </div>
                                                <div class="col-md-8">
                                                    <div class="form-group">
                                                        <label>Item Title</label>
                                                        <input type="text"
                                                               class="form-control input-sm menu-item-title">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label>Item URL</label>
                                                <input type="text" class="form-control input-sm">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li data-id="3">
                                <div class="bb-menu-item">
                                    <div class="bb-menu-item-title">
                                        <i></i>
                                        <span>Contact</span>

                                        <div class="bb-menu-actions pull-right">
                                            <a href="javascript:" class="bb-menu-delete"><i class="fa fa-close"></i></a>
                                            <a href="javascript:" class="bb-menu-collapse"><i
                                                    class="fa fa-caret-down"></i></a>
                                        </div>
                                    </div>
                                    <div class="bb-menu-item-body">
                                        <div class="bb-menu-form">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Icon</label>
                                                        <input type="text" data-placement="right"
                                                               class="form-control input-sm icp-auto">
                                                    </div>
                                                </div>
                                                <div class="col-md-8">
                                                    <div class="form-group">
                                                        <label>Item Title</label>
                                                        <input type="text"
                                                               class="form-control input-sm menu-item-title">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label>Item URL</label>
                                                <input type="text" class="form-control input-sm">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li data-id="4">
                                <div class="bb-menu-item">
                                    <div class="bb-menu-item-title">
                                        <i></i>
                                        <span>Privacy</span>

                                        <div class="bb-menu-actions pull-right">
                                            <a href="javascript:" class="bb-menu-delete"><i class="fa fa-close"></i></a>
                                            <a href="javascript:" class="bb-menu-collapse"><i
                                                    class="fa fa-caret-down"></i></a>
                                        </div>
                                    </div>
                                    <div class="bb-menu-item-body">
                                        <div class="bb-menu-form">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Icon</label>
                                                        <input type="text" data-placement="right"
                                                               class="form-control input-sm icp-auto">
                                                    </div>
                                                </div>
                                                <div class="col-md-8">
                                                    <div class="form-group">
                                                        <label>Item Title</label>
                                                        <input type="text"
                                                               class="form-control input-sm menu-item-title">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label>Item URL</label>
                                                <input type="text" class="form-control input-sm">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ol>

                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Main Menu</h3>
                    </div>
                    <div class="panel-body">
                        <ol class="bb-menu-area"></ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {

        $('.bb-sortable-static li').draggable({
            helper: "clone",
            revert: "invalid",
            connectToSortable: '.bb-menu-area'
        });

        $('.bb-menu-area').nestedSortable({
            change: function () {
                iconSelector();
            },
            receive: function () {
                iconSelector();
            }
        });

        function iconSelector() {
            $('.icp-auto').iconpicker();
            $('.icp-auto').on('iconpickerSelected', function (e) {
                var icon = e.iconpickerValue;
                $(this).closest('.bb-menu-item').find('.bb-menu-item-title>i').attr('class', 'fa ' + icon);
            });

            $('.bb-menu-item').each(function () {
                var $this = $(this),
                    title = $this.find('.bb-menu-item-title>span').text();

                $this.find('.menu-item-title').val(title);
            });
        }

        $('body')
            .on('input', '.menu-item-title', function () {
                var value = $(this).val();
                $(this).closest('.bb-menu-item').find('.bb-menu-item-title>span').text(value);
            })
            .on('click', '.bb-menu-collapse', function (){
                var $this = $(this);
                var body = $this.closest('.bb-menu-item').find('.bb-menu-item-body');
                var icon = $this.find('i');

                if($this.hasClass("expand")){
                    body.slideUp();
                    $this.removeClass("expand");
                    icon.addClass("fa-caret-down");
                    icon.removeClass('fa-caret-up');
                }else{
                    body.slideDown();
                    $this.addClass("expand");
                    icon.removeClass("fa-caret-down");
                    icon.addClass('fa-caret-up');
                }
            });
    });
</script>